{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { auth } from \"../firebase/config\";\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, updateProfile } from 'firebase/auth';\nimport { setAvatarStorage } from \"../firebase/storage\";\nimport { rejecterUser } from \"../firebase/firestore\";\nexport var createUser = createAsyncThunk('user/create', function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var email = _ref.email,\n      password = _ref.password,\n      avatar = _ref.avatar,\n      login = _ref.login;\n    try {\n      var newUser = yield createUserWithEmailAndPassword(auth, email, password);\n      var id = newUser.user.uid;\n      var response = yield fetch(avatar);\n      var file = yield response.blob();\n      var _url = yield setAvatarStorage(file, id);\n      yield rejecterUser({\n        email: email,\n        url: _url,\n        login: login,\n        id: id\n      });\n      return {\n        email: email,\n        url: _url,\n        login: login,\n        id: id\n      };\n    } catch (error) {\n      throw error;\n    }\n  });\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var authUser = createAsyncThunk('user/auth', function () {\n  var _ref4 = _asyncToGenerator(function* (_ref3) {\n    var email = _ref3.email,\n      password = _ref3.password;\n    try {\n      var setUser = yield signInWithEmailAndPassword(auth, email, password);\n      var id = setUser.user.uid;\n      return {\n        email: email,\n        url: url,\n        login: login,\n        id: id\n      };\n    } catch (error) {\n      throw error;\n    }\n  });\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}());","map":{"version":3,"names":["createAsyncThunk","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","updateProfile","setAvatarStorage","rejecterUser","createUser","_ref2","_asyncToGenerator","_ref","email","password","avatar","login","newUser","id","user","uid","response","fetch","file","blob","url","error","_x","apply","arguments","authUser","_ref4","_ref3","setUser","_x2"],"sources":["/Users/andrijgadar/Documents/GitHub/react-native-profile-project/src/redux/operations.js"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { auth } from '../firebase/config';\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  updateProfile,\n} from 'firebase/auth';\nimport { setAvatarStorage } from '../firebase/storage';\nimport { rejecterUser } from '../firebase/firestore';\n\nexport const createUser = createAsyncThunk(\n  'user/create',\n  async ({ email, password, avatar, login }) => {\n    try {\n      const newUser = await createUserWithEmailAndPassword(\n        auth,\n        email,\n        password\n      );\n\n      const id = newUser.user.uid; // індетифікація user\n      const response = await fetch(avatar);\n      const file = await response.blob();\n      const url = await setAvatarStorage(file, id);\n\n      await rejecterUser({ email, url, login, id }); // записує user у firebase\n      return { email, url, login, id };\n    } catch (error) {\n      throw error;\n    }\n  }\n);\n\nexport const authUser = createAsyncThunk(\n  'user/auth',\n  async ({ email, password }) => {\n    try {\n      const setUser = await signInWithEmailAndPassword(auth, email, password);\n\n      const id = setUser.user.uid; // індетифікація user\n\n      return { email, url, login, id };\n    } catch (error) {\n      throw error;\n    }\n  }\n);\n"],"mappings":";AAAA,SAASA,gBAAgB,QAAQ,kBAAkB;AACnD,SAASC,IAAI;AACb,SACEC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,kBAAkB,EAClBC,aAAa,QACR,eAAe;AACtB,SAASC,gBAAgB;AACzB,SAASC,YAAY;AAErB,OAAO,IAAMC,UAAU,GAAGR,gBAAgB,CACxC,aAAa;EAAA,IAAAS,KAAA,GAAAC,iBAAA,CACb,WAAAC,IAAA,EAA8C;IAAA,IAArCC,KAAK,GAAAD,IAAA,CAALC,KAAK;MAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;MAAEC,MAAM,GAAAH,IAAA,CAANG,MAAM;MAAEC,KAAK,GAAAJ,IAAA,CAALI,KAAK;IACrC,IAAI;MACF,IAAMC,OAAO,SAASd,8BAA8B,CAClDD,IAAI,EACJW,KAAK,EACLC,QACF,CAAC;MAED,IAAMI,EAAE,GAAGD,OAAO,CAACE,IAAI,CAACC,GAAG;MAC3B,IAAMC,QAAQ,SAASC,KAAK,CAACP,MAAM,CAAC;MACpC,IAAMQ,IAAI,SAASF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClC,IAAMC,IAAG,SAASlB,gBAAgB,CAACgB,IAAI,EAAEL,EAAE,CAAC;MAE5C,MAAMV,YAAY,CAAC;QAAEK,KAAK,EAALA,KAAK;QAAEY,GAAG,EAAHA,IAAG;QAAET,KAAK,EAALA,KAAK;QAAEE,EAAE,EAAFA;MAAG,CAAC,CAAC;MAC7C,OAAO;QAAEL,KAAK,EAALA,KAAK;QAAEY,GAAG,EAAHA,IAAG;QAAET,KAAK,EAALA,KAAK;QAAEE,EAAE,EAAFA;MAAG,CAAC;IAClC,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,iBAAAC,EAAA;IAAA,OAAAjB,KAAA,CAAAkB,KAAA,OAAAC,SAAA;EAAA;AAAA,GACH,CAAC;AAED,OAAO,IAAMC,QAAQ,GAAG7B,gBAAgB,CACtC,WAAW;EAAA,IAAA8B,KAAA,GAAApB,iBAAA,CACX,WAAAqB,KAAA,EAA+B;IAAA,IAAtBnB,KAAK,GAAAmB,KAAA,CAALnB,KAAK;MAAEC,QAAQ,GAAAkB,KAAA,CAARlB,QAAQ;IACtB,IAAI;MACF,IAAMmB,OAAO,SAAS7B,0BAA0B,CAACF,IAAI,EAAEW,KAAK,EAAEC,QAAQ,CAAC;MAEvE,IAAMI,EAAE,GAAGe,OAAO,CAACd,IAAI,CAACC,GAAG;MAE3B,OAAO;QAAEP,KAAK,EAALA,KAAK;QAAEY,GAAG,EAAHA,GAAG;QAAET,KAAK,EAALA,KAAK;QAAEE,EAAE,EAAFA;MAAG,CAAC;IAClC,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,iBAAAQ,GAAA;IAAA,OAAAH,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}